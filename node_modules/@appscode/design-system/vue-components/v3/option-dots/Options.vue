<script setup lang="ts">
import { onMounted, onUnmounted, ref, type Ref } from "vue";

interface Props {
  modifierClasses?: string;
  position?: string;
}

withDefaults(defineProps<Props>(), {
  modifierClasses: "",
  position: "",
});

const showOptions = ref(false);

onMounted(() => {
  document.addEventListener("click", documentClick);
});
onUnmounted(() => {
  document.removeEventListener("click", documentClick);
});
const clusterOptionsButtons: Ref<HTMLElement | null> = ref(null);

const documentClick = (e: Event) => {
  const el = clusterOptionsButtons.value;
  const target = e.target as HTMLInputElement;
  if (el != target && !el?.contains(target)) {
    showOptions.value = false;
  }
};
</script>
<template>
  <button
    class="ac-options"
    ref="clusterOptionsButtons"
    data-testid="cluster-option-buttons"
    :class="position"
    @click.prevent.stop="showOptions = !showOptions"
  >
    <div class="option-dots">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <!-- dropdown Item start  -->
    <!-- use "is-hidden" class in the line below for hide dropdown element  -->
    <slot :class="{ 'is-hidden': !showOptions }" />
    <!-- dropdown Item end -->
  </button>
</template>

<style lang="scss">
@import "../../../vue-components/styles/components/options";
</style>
