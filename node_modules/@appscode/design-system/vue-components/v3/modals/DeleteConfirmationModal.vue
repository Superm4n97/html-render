<script setup lang="ts">
import { defineAsyncComponent } from "vue";

interface Props {
  open?: boolean;
  title?: string;
  message?: string;
  itemName?: string;
  isDeleteActive?: boolean;
}

withDefaults(defineProps<Props>(), {
  open: false,
  title: "",
  message: "",
  itemName: "",
  isDeleteActive: false,
});

const emit = defineEmits(["closemodal", "delete-confirmation-modal$confirm"]);

const confirm = (response: boolean) => {
  emit("delete-confirmation-modal$confirm", response);
};

const closeModal = () => {
  confirm(false);
  emit("closemodal", true);
};

const Modal = defineAsyncComponent(() => import("./../modal/Modal.vue"));
const AcButton = defineAsyncComponent(() => import("./../button/Button.vue"));
</script>

<template>
  <!-- modal start  -->

  <modal :title="title" modifier-classes="is-normal" :open="open" @closemodal="closeModal">
    <!-- freedom content start  -->
    <div class="action-message pt-35 pb-35 has-text-centered">
      <h5 class="is-message">{{ message }} {{ itemName ? "" : "?" }}</h5>
      <p class="is-description">{{ itemName }} {{ itemName ? "?" : "" }}</p>
    </div>

    <!-- freedom content end -->

    <!-- modal footer start -->
    <template #modal-footer-controls>
      <ac-button
        @click.stop="closeModal"
        title="Cancel"
        modifier-classes="is-outlined"
        :disabled="isDeleteActive"
        data-testid="delete-confirmation-modal-close-button"
      />
      <ac-button
        modifier-classes="is-danger"
        :is-loader-active="isDeleteActive"
        title="Yes"
        @click.stop="confirm(true)"
        data-testid="delete-confirmation-modal-confirm-button"
      />
    </template>
  </modal>
  <!-- modal end  -->
</template>
