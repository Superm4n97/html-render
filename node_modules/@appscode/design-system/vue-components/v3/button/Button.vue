<script setup lang="ts">
import { computed } from "vue";

interface Props {
  title?: string;
  tooltip?: string;
  isLoaderActive?: boolean;
  disabled?: boolean;
  iconClass?: string;
  iconImage?: string;
  iconImageWidth?: number;
  modifierClasses?: string;
  titleModifierClass?: string;
  dataTestId?: string;
}

const props = withDefaults(defineProps<Props>(), {
  title: "",
  tooltip: undefined,
  isLoaderActive: false,
  disabled: false,
  iconClass: "",
  iconImage: "",

  iconImageWidth: undefined,
  modifierClasses: "is-primary",
  titleModifierClass: "",
  dataTestId: "button-id",
});

const emit = defineEmits(["click"]);

const handleClick = (e: Event) => {
  if (!props.disabled) emit("click", e);
};

const showUnpluginIcon = computed(() => {
  if (props.iconClass.includes("unplugin")) return true;
  else return false;
});
</script>

<template>
  <button
    class="button ac-button"
    :class="`${modifierClasses}${isLoaderActive ? ' is-loading' : ''}`"
    :disabled="disabled ? true : undefined"
    @click="handleClick"
    :title="tooltip"
    data-testid="dataTestId"
  >
    <span v-if="iconClass || iconImage" class="icon is-small" :class="showUnpluginIcon ? iconClass : ''">
      <img v-if="iconImage" :src="iconImage" alt="icon" :width="iconImageWidth" />

      <slot name="icon" v-else-if="showUnpluginIcon" />

      <i v-else :class="`fa fa-${iconClass}`" aria-hidden="true" />
    </span>

    <span v-if="title" :class="titleModifierClass">{{ title }}</span>
    <slot />
  </button>
</template>

<style lang="scss">
@import "../../../vue-components/styles/components/button";
</style>
