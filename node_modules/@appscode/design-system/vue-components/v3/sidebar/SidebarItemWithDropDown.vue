<script setup lang="ts">
import { ref, watch } from "vue";

interface Props {
  isDropDownOpen?: boolean;
  title?: string;
  icon?: string;
}

const props = withDefaults(defineProps<Props>(), {
  isDropDownOpen: false,
  title: "Sidebar Item",
  icon: "https://cdn.appscode.com/k8s/icons/apiextensions.k8s.io/customresourcedefinitions.svg",
});

const dropDownStatus = ref<"close" | "open">("close");

watch(
  () => props.isDropDownOpen,
  (n) => {
    if (n) {
      dropDownStatus.value = "open";
    }
  },
  { immediate: true }
);

const toggleDropDownStatus = () => {
  if (dropDownStatus.value === "open") dropDownStatus.value = "close";
  else dropDownStatus.value = "open";
};
</script>

<template>
  <li :class="`is-${dropDownStatus}`">
    <a class="ac-dropdown-button" :title="title" @click="toggleDropDownStatus">
      <span>
        <img :src="icon" alt="icon" />
      </span>
      <strong>{{ title || "-" }}</strong>
      <span class="ac-arrow-down">
        <i class="fa fa-angle-down" aria-hidden="true"> </i>
      </span>
    </a>

    <ul v-if="dropDownStatus == 'open'">
      <slot />
    </ul>
  </li>
</template>
