<script setup lang="ts">
import { defineAsyncComponent } from "vue";

interface Props {
  isColorpickerEnabled?: boolean;
  hideFooter?: boolean;
}

withDefaults(defineProps<Props>(), {
  isColorpickerEnabled: false,
  hideFooter: false,
});

defineEmits(["toggleSidebar"]);
const AccentColorPicker = defineAsyncComponent(() => import("./AccentColorPicker.vue"));
</script>

<template>
  <div class="sidebar-footer" :class="{ 'b-t-n': hideFooter }">
    <!-- back button  -->
    <button
      class="back-button is-transparent"
      :class="{ 'back-button-hide': hideFooter }"
      data-testid="sidebar-footer-back-button"
      @click="$emit('toggleSidebar')"
    >
      <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M11.25 13.5L6.75 9L11.25 4.5"
          stroke="white"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path d="M16 14V4" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </button>
    <!-- back button  -->

    <!-- color control  -->
    <div v-if="isColorpickerEnabled" class="accent-color-picker">
      <accent-color-picker />
    </div>
    <!-- color control  -->
  </div>
</template>

<style lang="scss" scoped>
.sidebar-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 30px;
  border-top: 1px solid rgba(255, 255, 255, 0.2);
  .back-button-hide {
    display: none !important;
    color: $color-text;
    margin-bottom: 10px !important;
    background-color: transparent;
  }

  .back-button {
    display: flex;
    padding: 5px 16px;
    cursor: pointer;
    justify-content: flex-start;
    width: 50%;
    &:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }
  }
}
.sidebar-collapsed .ac-left-sidebar-wrapper {
  .accent-color-picker {
    display: none;
  }
  .sidebar-footer {
    .back-button {
      width: 100%;
      transform: rotate(180deg);
    }
  }
}
</style>
